<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Macave Mining Dashboard</title>
</head>
<body>
  <h1>Dashboard do Usuário</h1>
  <p>Saldo: <span id="balance">0</span> USD</p>
  <h2>Planos Ativos</h2>
  <ul id="plans"></ul>

  <script>
    const token = localStorage.getItem("token"); // token JWT do login

    fetch("/api/dashboard", {
      headers: {
        Authorization: `Bearer ${token}`
      }
    })
    .then(res => res.json())
    .then(data => {
      document.getElementById("balance").innerText = data.balance;

      const plansList = document.getElementById("plans");
      data.plans.forEach(plan => {
        const li = document.createElement("li");
        li.innerText = `${plan.name} - Lucro diário: ${plan.dailyProfit}% por ${plan.durationDays} dias`;
        plansList.appendChild(li);
      });
    })
    .catch(err => console.error(err));
  </script>
</body>
</html>
