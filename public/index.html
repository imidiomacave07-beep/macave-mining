<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Macave Mining - Login & Registro</title>
<style>
body { font-family: Arial; background:#f4f7fa; margin:0; color:#333; display:flex; justify-content:center; align-items:center; height:100vh; }
.container { background:white; padding:30px; border-radius:10px; box-shadow:0 0 15px rgba(0,0,0,0.1); width:300px; text-align:center; }
h2 { color:#0074D9; }
input { width:100%; padding:10px; margin:10px 0; border-radius:5px; border:1px solid #ccc; }
button { width:100%; padding:10px; border:none; border-radius:5px; background:#0074D9; color:white; cursor:pointer; }
button:hover { background:#005fa3; }
.message { margin:10px 0; color:green; }
.error { color:red; }
</style>
</head>
<body>

<div class="container">
  <h2>Macave Mining</h2>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Senha">
  
  <button onclick="register()">Registrar</button>
  <button onclick="login()">Login</button>
  
  <div class="message" id="message"></div>
</div>

<script>
const API_URL = "https://macave-mining.onrender.com/api/auth";

function showMessage(text, isError=false) {
  const msg = document.getElementById("message");
  msg.textContent = text;
  msg.className = isError ? "error" : "message";
}

async function register() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  try {
    const res = await fetch(`${API_URL}/register`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password })
    });
    const data = await res.json();
    if(res.ok) showMessage(data.message);
    else showMessage(data.error, true);
  } catch(err) {
    showMessage("Erro de conexão", true);
  }
}

async function login() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  try {
    const res = await fetch(`${API_URL}/login`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password })
    });
    const data = await res.json();
    if(res.ok) {
      showMessage("Login sucesso! Token: " + data.token);
      console.log("JWT:", data.token);
    } else {
      showMessage(data.error, true);
    }
  } catch(err) {
    showMessage("Erro de conexão", true);
  }
}
</script>

</body>
</html>
